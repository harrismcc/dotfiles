# Fig pre block. Keep at the top of this file.
[[ -f "$HOME/.fig/shell/zshrc.pre.zsh" ]] && builtin source "$HOME/.fig/shell/zshrc.pre.zsh"
# If you come from bash you might have to change your $PATH.
export PATH=$HOME/bin:/usr/local/bin:$PATH

# Path to your oh-my-zsh installation.
export ZSH="$HOME/.oh-my-zsh"

# Set name of the theme to load --- if set to "random", it will
# load a random theme each time oh-my-zsh is loaded, in which case,
# to know which specific one was loaded, run: echo $RANDOM_THEME
# See https://github.com/ohmyzsh/ohmyzsh/wiki/Themes
ZSH_THEME="robbyrussell"

# Which plugins would you like to load?
# Standard plugins can be found in $ZSH/plugins/
# Custom plugins may be added to $ZSH_CUSTOM/plugins/
# Example format: plugins=(rails git textmate ruby lighthouse)
# Add wisely, as too many plugins slow down shell startup.
plugins=(git)

source $ZSH/oh-my-zsh.sh

# From OLD .zshrc
# NVM
export NVM_DIR=~/.nvm
source $(brew --prefix nvm)/nvm.sh

##############
# Git Prompt #
##############

if [ "$ZSH_VERSION" != "" ]
then
  source "/Users/harris/zsh-git-prompt/zshrc.sh"
  PROMPT='%B%m%~%b$(git_super_status) %# '
fi


export GITHUB_USERNAME=harrismcc
export GITHUB_EMAIL=harris@transcend.io
export TRANSCEND_DIR=/Users/harris/transcend

# Load zshenv from transcend-io/main
if [[ -f $TRANSCEND_DIR/main/.devcontainer/files/etc/zsh/zshenv ]]; then
  source $TRANSCEND_DIR/main/.devcontainer/files/etc/zsh/zshenv
fi

# Load zshrc from transcend-io/main
if [[ -f $TRANSCEND_DIR/main/.devcontainer/files/etc/zsh/zshrc ]]; then
  source $TRANSCEND_DIR/main/.devcontainer/files/etc/zsh/zshrc
fi


# add Pulumi to the PATH
export PATH=$PATH:$HOME/.pulumi/bin

# The next line updates PATH for the Google Cloud SDK.
if [ -f '/Users/harris/Downloads/google-cloud-sdk/path.zsh.inc' ]; then . '/Users/harris/Downloads/google-cloud-sdk/path.zsh.inc'; fi

# The next line enables shell command completion for gcloud.
if [ -f '/Users/harris/Downloads/google-cloud-sdk/completion.zsh.inc' ]; then . '/Users/harris/Downloads/google-cloud-sdk/completion.zsh.inc'; fi


# Starship
eval "$(starship init zsh)"

export PATH=/Users/harris/.local/bin:$PATH

# Fig post block. Keep at the bottom of this file.
[[ -f "$HOME/.fig/shell/zshrc.post.zsh" ]] && builtin source "$HOME/.fig/shell/zshrc.post.zsh"

# Set node ram options
export NODE_OPTIONS="--max_old_space_size=8192"
alias s="NODE_OPTIONS=\"--max_old_space_size=8192\" yarn node local_dev/start.js"

# Alias to kill all zellij sessions
alias zclean='zellij kill-all-sessions -y && zellij delete-all-sessions -y'

# Strange fix needed to get pre-commit checks to work
export YARN_IGNORE_NODE=1


# Add Docker to path
export PATH="$PATH:/Applications/Docker.app/Contents/Resources/bin/"

# Add python stuff to path
export PATH="/opt/homebrew/anaconda3/bin:$PATH"
export PATH="/Users/harris/.local/bin:$PATH"

# pnpm
export PNPM_HOME="/Users/harris/Library/pnpm"
case ":$PATH:" in
  *":$PNPM_HOME:"*) ;;
  *) export PATH="$PNPM_HOME:$PATH" ;;
esac
# pnpm end

# Disable docker hints
export DOCKER_CLI_HINTS=falsexport DOCKER_CLI_HINTS=falsee

# bun completions
[ -s "/Users/harris/.bun/_bun" ] && source "/Users/harris/.bun/_bun"
export PATH="/opt/homebrew/opt/postgresql@15/bin:$PATH"

# Enable prompt caching for claude code
export DISABLE_PROMPT_CACHING=0

# Alias for git branches that are gone from remote
alias gone="!c() { git branch -vv | grep ': gone]' | awk '{print $1}'; }; c"

# Added by LM Studio CLI (lms)
export PATH="$PATH:/Users/harris/.lmstudio/bin"
# End of LM Studio CLI section

# Nix
if [ -e '/nix/var/nix/profiles/default/etc/profile.d/nix-daemon.sh' ]; then
  . '/nix/var/nix/profiles/default/etc/profile.d/nix-daemon.sh'
fi
# End Nix

export EDITOR=nvim

# opencode
export PATH=$HOME/.opencode/bin:$PATH
